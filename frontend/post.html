<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generate Post</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
  <div class="bg-white p-8 rounded-2xl shadow-lg w-[500px]">
    <h1 class="text-2xl font-bold text-blue-700 mb-6 text-center">
      Generate LinkedIn Post
    </h1>

    <!-- Topic -->
    <label class="block mb-2 font-medium">Topic</label>
    <select id="topic" class="w-full p-2 border rounded mb-4">
      <option value="choose">Choose</option>
      <option value="motivation">Motivation</option>
      <option value="job search">Job Search</option>
      <option value="social media">Social Media</option>
      <option value="scams">Scams</option>
    </select>

    <!-- Length -->
    <label class="block mb-2 font-medium">Length</label>
    <select id="length" class="w-full p-2 border rounded mb-4">
      <option value="choose">Choose</option>
      <option value="short">Short</option>
      <option value="medium">Medium</option>
      <option value="long">Long</option>
    </select>

    <!-- Language -->
    <label class="block mb-2 font-medium">Language</label>
    <select id="language" class="w-full p-2 border rounded mb-4">
      <option value="choose">Choose</option>
      <option value="english">English</option>
      <option value="hinglish">Hinglish</option>
    </select>

    <!-- Buttons -->
    <div class="flex justify-between">
      <button onclick="generatePost()" class="bg-blue-500 text-white px-4 py-2 rounded">Generate</button>
      <a href="index.html" class="bg-gray-400 text-white px-4 py-2 rounded">Back</a>
    </div>

    <!-- Output -->
    <div id="output" class="p-4 bg-gray-100 mt-6 rounded min-h-[100px]"></div>
  </div>

  <script>
    async function generatePost() {
      const topic = document.getElementById("topic").value;
      const length = document.getElementById("length").value;
      const language = document.getElementById("language").value;

      if (topic === "choose" || length === "choose" || language === "choose") {
        alert("Please select all options");
        return;
      }

      const prompt = `Write a ${length} LinkedIn post in ${language} about ${topic}.`;

      try {
        const res = await fetch("http://localhost:5000/generate", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt })
        });

        const data = await res.json();
        document.getElementById("output").innerText = data.text || "No output received.";
      } catch (err) {
        console.error(err);
        document.getElementById("output").innerText = "Error generating post.";
      }
    }
  </script>
</body>
</html>
